(function(t){function e(e){for(var i,a,o=e[0],h=e[1],c=e[2],u=0,d=[];u<o.length;u++)a=o[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(i in h)Object.prototype.hasOwnProperty.call(h,i)&&(t[i]=h[i]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),s()}function s(){for(var t,e=0;e<r.length;e++){for(var s=r[e],i=!0,o=1;o<s.length;o++){var h=s[o];0!==n[h]&&(i=!1)}i&&(r.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={index:0},r=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],h=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var l=h;r.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("c31f")},"0827":function(t,e,s){"use strict";var i=s("bbb8"),n=s.n(i);n.a},"4d1c":function(t,e,s){"use strict";var i=s("accf"),n=s.n(i);n.a},accf:function(t,e,s){},bbb8:function(t,e,s){},c31f:function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var i=s("2b0e"),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("palette")],1)},r=[];s("c975");Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var a=!1;function o(){}try{var h=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});window.addEventListener("testPassive",o,h),window.removeEventListener("testPassive",o,h)}catch(A){a=!1}function c(t){return t.scrollTop<=0}function l(t){return t.scrollHeight-t.scrollTop<=t.clientHeight}function u(t,e,s){if(!s)return!0;var i=t.clientX-e.clientX,n=t.clientY-e.clientY,r=Math.abs(i),a=Math.abs(n);return r<a}function d(t,e,s,i){var n=t[e],r=t[s];return!(r<=n)&&-1===["hidden","visible"].indexOf(getComputedStyle(t)[i])}function p(t){return d(t,"clientWidth","scrollWidth","overflowX")}var y=!1,v=null,f=null,g=!1,w=!1;function m(){y=!1,v=null,f=null,g=!1,w=!1}function x(t){var e=document.createElement("style");e.type="text/css",e.setAttribute("data-prevent-scroll","true"),e.innerText="".concat(t," { -webkit-overflow-scrolling: touch; }"),document.head.appendChild(e)}function b(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.ignore,s=void 0===e?".scrollable":e;function i(t){if("string"===typeof s){f=t.target.closest(s),f&&(w=p(f));var e=t.touches[0],i=e.clientX,n=e.clientY;v={clientX:i,clientY:n}}g=t.target.closest("#__vconsole")}function n(t){if(!g){if("string"===typeof s){var e=t.touches[0],i=!0;if(f?e.clientY<v.clientY&&u(e,v,w)&&l(f)?i=!1:e.clientY>v.clientY&&u(e,v,w)&&c(f)&&(i=!1):i=!1,v={clientX:e.clientX,clientY:e.clientY},i)return}"function"===typeof s&&s(t.target)||t.cancelable&&t.preventDefault()}}function r(){f=null,g=!1}y=!0,x(s);var o=!!a&&{passive:!1};function h(){m(),window.removeEventListener("touchstart",i,o),window.removeEventListener("touchmove",n,o),window.removeEventListener("touchend",r,o)}return y&&h(),window.addEventListener("touchstart",i,o),window.addEventListener("touchmove",n,o),window.addEventListener("touchend",r,o),{cancel:h}}var P=b;P();var S={name:"app"},_=S,T=(s("4d1c"),s("2877")),E=Object(T["a"])(_,n,r,!1,null,null,null),O=E.exports,C=(s("a4d3"),s("4de4"),s("4160"),s("d81d"),s("b0c0"),s("e439"),s("dbb4"),s("b64b"),s("159b"),s("2fa7")),B=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"palette"},[s("p",{staticClass:"palette_tip"},[t._v(" Nangxi's drawing board"),s("button",{staticClass:"tip_btn",attrs:{type:"button"},on:{click:t.showBar}},[t._v(" 编辑面板 ")])]),s("div",{ref:"palette_wrapper",staticClass:"palette_wrapper",style:"width:"+t.canvasStyles.width+"px;height:"+t.canvasStyles.height+"px;border:"+t.canvasStyles.borderStyle+" "+t.canvasStyles.borderWidth+"px "+t.canvasStyles.borderColor+";"},[t.isEraser?s("div",{ref:"eraser",staticClass:"eraser",style:"width:"+t.eraserOptions.size+"px;height:"+t.eraserOptions.size+"px;background-color:"+t.eraserOptions.backgroundColor+";"+(t.eraserOptions.isRect?"":"border-radius:50%;"),on:{touchstart:function(e){return e.stopPropagation(),t.startPoint(e)},touchmove:function(t){t.stopPropagation()},touchend:function(e){return e.stopPropagation(),t.endPoint(e)},mousedown:function(e){return e.stopPropagation(),t.startPoint(e)},mousemove:function(t){t.stopPropagation()},mouseup:function(e){return e.stopPropagation(),t.endPoint(e)}}}):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:"PaintCircle"==t.touchType&&t.isEdit,expression:"touchType == 'PaintCircle' && isEdit"}],ref:"circle",staticClass:"circle"},[s("span",{on:{click:t.closeEdit,touchstart:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()}}},[t._v("×")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"PaintRectangle"==t.touchType&&t.isEdit,expression:"touchType == 'PaintRectangle' && isEdit"}],ref:"rectangle",staticClass:"rectangle"},[s("span",{on:{click:t.closeEdit,touchstart:function(t){t.stopPropagation()},touchend:function(t){t.stopPropagation()},mousedown:function(t){t.stopPropagation()},mouseup:function(t){t.stopPropagation()}}},[t._v("×")])]),s("canvas",{ref:"palette",attrs:{width:t.canvasStyles.width-2*t.canvasStyles.borderWidth,height:t.canvasStyles.height-2*t.canvasStyles.borderWidth}})]),s("div",{ref:"historyBar",staticClass:"historyBar"},[s("div",{staticClass:"historyBar_close",on:{click:t.showHistory}},[t._v("×")]),s("p",{staticClass:"historyBar_title"},[t._v("所有操作记录")]),s("div",{staticClass:"history_wrapper scrollable"},t._l(t.history,(function(e,i){return s("div",{key:i,staticClass:"history_item",on:{click:function(e){return t.goHistory(i)}}},[t._v(" "+t._s(e.time)+t._s(e.text)+" ")])})),0),s("div",{staticClass:"more"})]),s("div",{ref:"showBar",staticClass:"showBar"},[s("div",{staticClass:"showBar_close",on:{click:t.showBar}},[t._v("×")]),s("p",{staticClass:"showBar_title"},[t._v("当前画笔状态："+t._s(t.currentStatus))]),s("div",{staticClass:"showBar_wrapper scrollable"},[s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.prevPaint}},[t._v(" 回撤 ")]),s("button",{attrs:{type:"button"},on:{click:t.nextPaint}},[t._v(" 前进 ")]),s("span",{staticStyle:{"font-size":"14px"},on:{click:t.showHistory}},[t._v("共有"+t._s(t.history.length)+"条记录，当前第"+t._s(t.currectHistory+1)+"条"),s("span",{staticStyle:{color:"#fed640"}},[t._v(">>")])])]),t.showbarOption.clearBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.clearPalette}},[t._v(" 清除 ")]),s("span",[t._v("当前清理次数"+t._s(t.clearTimes))])]):t._e(),s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.paintRandom}},[t._v(" 普通画笔 ")])]),t.showbarOption.lineBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.paintLine}},[t._v(" 直线画笔 ")])]):t._e(),t.showbarOption.hollowIrregularPolygonBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:function(e){return t.paintIrregularPolygon("Hollow")}}},[t._v(" 空心不规则多边形画笔 ")])]):t._e(),t.showbarOption.solidIrregularPolygonBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:function(e){return t.paintIrregularPolygon("Solid")}}},[t._v(" 实心不规则多边形画笔 ")])]):t._e(),t.showbarOption.paintCircleBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.paintCircle}},[t._v(" 圆形画笔 ")])]):t._e(),t.showbarOption.paintRectangleBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.paintRectangle}},[t._v(" 矩形画笔 ")])]):t._e(),t.showbarOption.paintTextBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.paintText}},[t._v(" 插入文字 ")])]):t._e(),t.showbarOption.eraserBtn?s("div",{staticClass:"showBar_item"},[s("button",{attrs:{type:"button"},on:{click:t.showEraser}},[t._v(" 橡皮擦 ")])]):t._e(),t.showbarOption.saveBtn.isShow?s("div",{staticClass:"showBar_item"},[t.showbarOption.saveBtn.isShow?s("button",{attrs:{type:"button"},on:{click:function(e){return t.savePalette(t.showbarOption.saveBtn.imageType)}}},[t._v(" 生成图片 ")]):t._e()]):t._e()])]),t.lastBase64?s("div",{staticClass:"images",on:{click:function(e){return e.target!==e.currentTarget?null:t.closeImage(e)}}},[s("img",{ref:"resultImg",attrs:{src:t.lastBase64}})]):t._e()])},H=[],$=(s("99af"),s("cb29"),s("7db0"),s("fb6a"),s("0d03"),s("a9e3"),void 0===document.body.style.transform?"-webkit-transform":"transform"),W=document.body.offsetWidth-20,k=document.body.offsetHeight-75,N={name:"palette",props:{point:{type:String,default:""},showbarOption:{type:Object,default:function(){return{clearBtn:!0,saveBtn:{isShow:!0,imageType:"png"},lineBtn:!0,hollowIrregularPolygonBtn:!0,solidIrregularPolygonBtn:!0,paintCircleBtn:!0,paintRectangleBtn:!0,paintTextBtn:!0,eraserBtn:!0}}},canvasStyle:{type:Object,default:function(){return{}}},defaultColor:{type:String,default:"black"},defaultLineWidth:{type:Number,default:2},eraserOption:{type:Object,default:function(){return{}}}},data:function(){return{canvasStyles:{width:W,height:k,backgroundColor:"white",borderStyle:"solid",borderColor:"#fed640",borderWidth:5},cans:null,ctx:null,currentStatus:"普通画笔",touchType:"Random",preCurrentStatus:"",preTouchType:"",startNew:null,startOld:[],move:{},endPoints:[],circle:null,rectangle:null,text:null,isEdit:!1,isEditing:!1,isEraser:!1,eraserOptions:{size:20,backgroundColor:"black",isRect:!1},isHistory:!1,history:[],historyTextArr:[{operation:"Random",text:"画了一条不规则线"},{operation:"PaintCircle",text:"画了一个圆"},{operation:"PaintRectangle",text:"画了一个矩形"},{operation:"PaintText",text:"插入文本"},{operation:"Eraser",text:"擦除画板"}],currectHistory:-1,isShowBar:!1,clearTimes:0,lastBase64:""}},mounted:function(){Object.assign(this.canvasStyles,this.canvasStyle),Object.assign(this.eraserOptions,this.eraserOption),this.init()},methods:{startPoint:function(t){var e=t||window.event;this.startNew={x:e.clientX?e.clientX-this.$refs.palette.getBoundingClientRect().left:e.targetTouches[0].clientX-this.$refs.palette.getBoundingClientRect().left,y:e.clientY?e.clientY-this.$refs.palette.getBoundingClientRect().top:e.targetTouches[0].clientY-this.$refs.palette.getBoundingClientRect().top,isPaint:!1},this.startOld.push(this.startNew),"Random"!=this.touchType&&"Eraser"!=this.touchType||(this.ctx.beginPath(),this.ctx.lineWidth=this.defaultLineWidth,this.ctx.moveTo(this.startNew.x,this.startNew.y),"Eraser"==this.touchType?(this.ctx.lineWidth=this.eraserOptions.size,this.ctx.strokeStyle=this.canvasStyles.backgroundColor):(this.ctx.lineWidth=this.defaultLineWidth,this.ctx.strokeStyle=this.defaultColor)),"PaintCircle"!=this.touchType||this.isEditing||(this.circle.style[$]="translate3d(".concat(this.startNew.x,"px,").concat(this.startNew.y,"px,0)"),this.isEdit=!0),"PaintRectangle"!=this.touchType||this.isEditing||(this.isEdit=!0,this.rectangle.style[$]="translate3d(".concat(this.startNew.x,"px,").concat(this.startNew.y,"px,0)")),"PaintText"==this.touchType&&(this.isEdit=!0,this.text=document.createElement("div"),this.text.className="text",this.text.setAttribute("contenteditable","true"),this.text.style[$]="translate3d(".concat(this.startNew.x,"px,").concat(this.startNew.y,"px,0)"),this.$refs.palette_wrapper.appendChild(this.text),this.$refs.palette_wrapper.removeEventListener("touchstart",this.startPoint,!1),this.$refs.palette_wrapper.removeEventListener("mousedown",this.startPoint,!1)),this.$refs.palette_wrapper.addEventListener("touchmove",this.movePoint,!1),this.$refs.palette_wrapper.addEventListener("mousemove",this.movePoint,!1)},movePoint:function(t){var e=t||window.event;if(this.startNew.x==this.move.x&&this.startNew.y==this.move.y||(this.startOld[this.startOld.length-1].isPaint=!0,this.move={x:e.clientX?e.clientX-this.$refs.palette.getBoundingClientRect().left:e.targetTouches[0].clientX-this.$refs.palette.getBoundingClientRect().left,y:e.clientY?e.clientY-this.$refs.palette.getBoundingClientRect().top:e.targetTouches[0].clientY-this.$refs.palette.getBoundingClientRect().top}),"Random"!=this.touchType&&"Eraser"!=this.touchType||("Eraser"==this.touchType&&(this.move.x<=this.$refs.eraser.offsetWidth/2&&(this.move.x=this.$refs.eraser.offsetWidth/2),this.move.y<=this.$refs.eraser.offsetHeight/2&&(this.move.y=this.$refs.eraser.offsetHeight/2),this.move.x>=this.canvasStyles.width-2*this.canvasStyles.borderWidth-this.$refs.eraser.offsetWidth/2&&(this.move.x=this.canvasStyles.width-2*this.canvasStyles.borderWidth-this.$refs.eraser.offsetWidth/2),this.move.y>=this.canvasStyles.height-2*this.canvasStyles.borderWidth-this.$refs.eraser.offsetHeight/2&&(this.move.y=this.canvasStyles.height-2*this.canvasStyles.borderWidth-this.$refs.eraser.offsetHeight/2),this.$refs.eraser.style[$]="translate3d(".concat(this.move.x-this.eraserOptions.size/2,"px,").concat(this.move.y-this.eraserOptions.size/2,"px,0)")),this.ctx.lineTo(this.move.x,this.move.y),this.ctx.stroke()),"PaintCircle"!=this.touchType||this.isEditing)"PaintCircle"==this.touchType&&this.isEditing&&(this.circle.style[$]="translate3d(".concat(this.move.x-this.circle.offsetWidth/2,"px,").concat(this.move.y-this.circle.offsetWidth/2,"px,0)"));else{var s=Math.abs(this.startNew.x-this.move.x)>Math.abs(this.startNew.y-this.move.y)?Math.abs(this.startNew.x-this.move.x):Math.abs(this.startNew.y-this.move.y);this.circle.style.cssText="".concat($,":translate3d(").concat(this.startNew.x-s,"px,").concat(this.startNew.y-s,"px,0);width:").concat(2*s,"px;height:").concat(2*s,"px;")}"PaintRectangle"!=this.touchType||this.isEditing?"PaintRectangle"==this.touchType&&this.isEditing&&(this.rectangle.style[$]="translate3d(".concat(this.move.x-this.rectangle.offsetWidth,"px,").concat(this.move.y-this.rectangle.offsetHeight,"px,0)")):(this.rectangle.style.width="".concat(Math.abs(this.startNew.x-this.move.x),"px"),this.rectangle.style.height="".concat(Math.abs(this.startNew.y-this.move.y),"px"),this.startNew.x-this.move.x<=0?this.startNew.y-this.move.y>0?(this.rectangle.style[$]="translate3d(".concat(this.startNew.x,"px,").concat(this.move.y,"px,0)"),this.rectangle.dataset.x=this.startNew.x,this.rectangle.dataset.y=this.move.y):(this.rectangle.dataset.x=this.startNew.x,this.rectangle.dataset.y=this.startNew.y):this.startNew.y-this.move.y>0?(this.rectangle.style[$]="translate3d(".concat(this.move.x,"px,").concat(this.move.y,"px,0)"),this.rectangle.dataset.x=this.move.x,this.rectangle.dataset.y=this.move.y):(this.rectangle.style[$]="translate3d(".concat(this.move.x,"px,").concat(this.startNew.y,"px,0)"),this.rectangle.dataset.x=this.move.x,this.rectangle.dataset.y=this.startNew.y)),"PaintText"==this.touchType&&(this.text.style.width="".concat(Math.abs(this.startNew.x-this.move.x),"px"),this.text.style.height="".concat(Math.abs(this.startNew.y-this.move.y),"px"))},endPoint:function(){var t=this;if("Random"==this.touchType&&this.startNew&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.defaultColor,this.ctx.arc(this.startNew.x,this.startNew.y,this.defaultLineWidth/2,0,360,!1),this.ctx.fillStyle=this.defaultColor,this.ctx.fill()),"PaintCircle"==this.touchType&&(this.isEdit=!0,this.isEditing=!0),"PaintRectangle"==this.touchType&&(this.isEdit=!0,this.isEditing=!0),this.isEditing&&(this.endPoints.length<=1?this.endPoints=[this.move,this.move]:(this.endPoints.shift(),this.endPoints.push(this.move))),this.startNew=null,this.$refs.palette_wrapper.removeEventListener("touchmove",this.movePoint,!1),this.$refs.palette_wrapper.removeEventListener("mousemove",this.movePoint,!1),"PaintCircle"!==this.touchType&&"PaintRectangle"!==this.touchType){this.currectHistory++;var e=new Date;this.currectHistory==this.history.length?this.history.push({time:"".concat(e.getHours()<10?"0"+e.getHours():e.getHours(),":").concat(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),":").concat(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()),text:this.historyTextArr.find((function(e){return e.operation==t.touchType})).text,data:this.ctx.getImageData(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth)}):this.history=this.history.slice(this.currectHistory).push({time:"".concat(e.getHours()<10?"0"+e.getHours():e.getHours(),":").concat(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),":").concat(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()),text:this.historyTextArr.find((function(e){return e.operation==t.touchType})).text,data:this.ctx.getImageData(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth)})}},paintLine:function(){var t=this,e=this.startOld.filter((function(t){if(!t.isPaint)return t}));if(e.length<2)return this.$emit("paintLine","You need at least two active points"),void console.log("You need at least two active points");e.forEach((function(e,s,i){t.ctx.beginPath(),s<i.length-1?(t.ctx.moveTo(e.x,e.y),t.ctx.lineTo(i[s+1].x,i[s+1].y)):t.startOld=[],e.isPaint=!0,t.ctx.stroke()}))},paintIrregularPolygon:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Hollow",s=this.startOld.filter((function(t){if(!t.isPaint)return t}));if(s.length<3)return this.$emit("paintLine","You need at least three active points"),void console.log("You need at least three active points");this.ctx.beginPath(),this.ctx.moveTo(s[0].x,s[0].y),s[0].isPaint=!0,s.forEach((function(e,s,i){0!==s&&s<i.length?t.ctx.lineTo(e.x,e.y):t.startOld=[],e.isPaint=!0})),"Hollow"==e?(this.ctx.closePath(),this.ctx.stroke()):this.ctx.fill()},paintRandom:function(){this.touchType="Random",this.currentStatus="普通画笔"},paintCircle:function(){this.touchType="PaintCircle",this.currentStatus="圆形画笔"},paintRectangle:function(){this.touchType="PaintRectangle",this.currentStatus="矩形画笔"},paintText:function(){this.touchType="PaintText",this.currentStatus="文字画笔"},closeEdit:function(){var t=this;this.isEdit=!1,this.isEditing=!1,"PaintCircle"==this.touchType&&(this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle="black",this.endPoints[0].x==this.endPoints[1].x&&this.endPoints[0].y==this.endPoints[1].y?this.ctx.arc(this.startOld[this.startOld.length-1].x,this.startOld[this.startOld.length-1].y,this.circle.offsetWidth/2,0,2*Math.PI):this.ctx.arc(this.move.x,this.move.y,this.circle.offsetWidth/2,0,2*Math.PI),this.endPoints=[],this.ctx.stroke()),"PaintRectangle"==this.touchType&&(this.ctx.beginPath(),this.ctx.lineWidth=1,this.ctx.strokeStyle="black",this.endPoints[0].x==this.endPoints[1].x&&this.endPoints[0].y==this.endPoints[1].y?this.ctx.rect(this.rectangle.dataset.x,this.rectangle.dataset.y,this.rectangle.offsetWidth,this.rectangle.offsetHeight):this.ctx.rect(this.move.x-this.rectangle.offsetWidth,this.move.y-this.rectangle.offsetHeight,this.rectangle.offsetWidth,this.rectangle.offsetHeight),this.endPoints=[],this.ctx.stroke()),this.currectHistory++;var e=new Date;this.currectHistory==this.history.length?this.history.push({time:"".concat(e.getHours()<10?"0"+e.getHours():e.getHours(),":").concat(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),":").concat(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()),text:this.historyTextArr.find((function(e){return e.operation==t.touchType})).text,data:this.ctx.getImageData(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth)}):this.history=this.history.slice(this.currectHistory).push({time:"".concat(e.getHours()<10?"0"+e.getHours():e.getHours(),":").concat(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),":").concat(e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds()),text:this.historyTextArr.find((function(e){return e.operation==t.touchType})).text,data:this.ctx.getImageData(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth)})},showEraser:function(){this.isEraser=!this.isEraser,this.isEraser?(this.preCurrentStatus=this.currentStatus,this.preTouchType=this.touchType,this.currentStatus="橡皮擦",this.touchType="Eraser"):(this.currentStatus=this.preCurrentStatus,this.touchType=this.preTouchType)},prevPaint:function(){this.currectHistory>0?(this.ctx.clearRect(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth),--this.currectHistory,0==this.currectHistory?this.ctx.putImageData(this.history[0].data,0,0):this.ctx.putImageData(this.history[this.currectHistory].data,0,0)):this.currectHistory=0},nextPaint:function(){this.currectHistory<this.history.length-1?(this.ctx.clearRect(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth),this.ctx.putImageData(this.history[++this.currectHistory].data,0,0)):this.currectHistory=this.history.length-1},goHistory:function(t){this.ctx.clearRect(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth),this.ctx.putImageData(this.history[t].data,0,0),this.currectHistory=t},closeImage:function(){this.lastBase64=""},init:function(){this.cans=this.$refs.palette,this.circle=this.$refs.circle,this.rectangle=this.$refs.rectangle,this.ctx=this.$refs.palette.getContext("2d"),this.currectHistory++;var t=new Date;this.history.push({time:"".concat(t.getHours()<10?"0"+t.getHours():t.getHours(),":").concat(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),":").concat(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds()),text:"创建画布",data:this.ctx.getImageData(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth)}),this.$refs.palette_wrapper.addEventListener("touchstart",this.startPoint,!1),this.$refs.palette_wrapper.addEventListener("mousedown",this.startPoint,!1),this.$refs.palette_wrapper.addEventListener("touchend",this.endPoint,!1),this.$refs.palette_wrapper.addEventListener("mouseup",this.endPoint,!1)},clearPalette:function(){this.clearTimes++,this.ctx.clearRect(0,0,this.canvasStyles.width-2*this.canvasStyles.borderWidth,this.canvasStyles.height-2*this.canvasStyles.borderWidth),this.startNew=null,this.startOld=[],this.history=[],this.currectHistory=-1},savePalette:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";"png"==e?this.lastBase64=this.cans.toDataURL("image/png"):"jpeg"==e&&(this.lastBase64=this.cans.toDataURL("image/jpeg",1)),this.$nextTick((function(){var e=setTimeout((function(){t.$refs.resultImg.style[$]="translate3d(0,0,0)",clearTimeout(e)}),0)})),this.$emit("savePalette",this.lastBase64)},showBar:function(){this.isShowBar?(this.$refs.showBar.style[$]="translate3d(0,110%,0)",this.isShowBar=!1,this.$refs.palette_wrapper.addEventListener("touchstart",this.startPoint,!1),this.$refs.palette_wrapper.addEventListener("mousedown",this.startPoint,!1),this.$refs.palette_wrapper.addEventListener("touchend",this.endPoint,!1),this.$refs.palette_wrapper.addEventListener("mouseup",this.endPoint,!1)):(this.$refs.showBar.style[$]="translate3d(0,0,0)",this.isShowBar=!0,this.$refs.palette_wrapper.removeEventListener("touchstart",this.startPoint,!1),this.$refs.palette_wrapper.removeEventListener("mousedown",this.startPoint,!1),this.$refs.palette_wrapper.removeEventListener("touchend",this.endPoint,!1),this.$refs.palette_wrapper.removeEventListener("mouseup",this.endPoint,!1))},showHistory:function(){this.showBar(),this.isHistory?(this.$refs.historyBar.style[$]="translate3d(100%,0,0)",this.isHistory=!1):(this.$refs.historyBar.style[$]="translate3d(0,0,0)",this.isHistory=!0)}}},R=N,L=(s("0827"),Object(T["a"])(R,B,H,!1,null,null,null)),M=L.exports;M.install=function(t){t.compoent(M.name,M)};var j=M;function I(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.push.apply(s,i)}return s}function Y(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?I(s,!0).forEach((function(e){Object(C["a"])(t,e,s[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):I(s).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))}))}return t}var D=[j],X=function t(e){t.installed||(t.installed=!0,D.map((function(t){e.component(t.name,t)})))};"undefined"!==typeof window&&window.Vue&&X(window.Vue);var z=Y({install:X},D);i["a"].config.productionTip=!1,i["a"].use(z),new i["a"]({render:function(t){return t(O)}}).$mount("#app")}});
//# sourceMappingURL=index.8b23ab18.js.map